<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroVision - Smart Crop Advisory System</title>
    <!-- TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for market trends -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jsPDF for report generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#16a34a',
                        secondary: '#22c55e',
                        accent: '#84cc16',
                        dark: '#1a1a1a',
                        light: '#f7fee7'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        
        .gradient-bg {
            background: linear-gradient(120deg, #16a34a, #22c55e, #84cc16);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .nav-item.active {
            border-bottom: 3px solid #16a34a;
            color: #16a34a;
            font-weight: 600;
        }
        
        .crop-image {
            transition: transform 0.5s ease;
        }
        
        .crop-image:hover {
            transform: scale(1.05);
        }
        /* Animation for the hero section */
        
        @keyframes float {
            0%,
            100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
    </style>
</head>

<body class="bg-white text-gray-800">
    <!-- Header/Navigation -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-bold mr-2">AV</div>
                <span class="text-xl font-bold text-primary">Agro<span class="text-accent">Vision</span></span>
            </div>

            <nav class="hidden md:flex space-x-8">
                <a href="#" data-section="home" class="nav-item active hover:text-primary transition-colors">Home</a>
                <a href="#" data-section="crop-recommendation" class="nav-item hover:text-primary transition-colors">Crop Recommendation</a>
                <a href="#" data-section="pest-detection" class="nav-item hover:text-primary transition-colors">Pest Detection</a>
                <a href="#" data-section="market-prices" class="nav-item hover:text-primary transition-colors">Market Prices</a>
                <a href="#" data-section="weather" class="nav-item hover:text-primary transition-colors">Weather</a>
            </nav>

            <div class="flex items-center space-x-4">
                <a href="little.html" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition-colors">Sign Up</a>
                <button class="md:hidden p-2 rounded-md hover:bg-gray-200">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content Sections -->
    <main>
        <!-- Home/Landing Section -->
        <section id="home" class="section active">
            <!-- Hero Section -->
            <div class="gradient-bg text-white">
                <div class="container mx-auto px-4 py-16 md:py-24 flex flex-col md:flex-row items-center">
                    <div class="md:w-1/2 mb-10 md:mb-0">
                        <h1 class="text-4xl md:text-5xl font-bold mb-6">Helping Farmers with <span class="text-accent">AI-Powered Recommendations</span></h1>
                        <p class="text-xl mb-8">Get smart crop suggestions, pest detection, market insights, and weather forecasts tailored to your farming needs.</p>
                        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                            <a href="#" data-section="crop-recommendation" class="bg-white text-primary px-6 py-3 rounded-lg font-medium text-center hover:bg-gray-100 transition-colors">Crop Recommendation</a>
                            <a href="#" data-section="pest-detection" class="border-2 border-white text-white px-6 py-3 rounded-lg font-medium text-center hover:bg-white/10 transition-colors">Pest Detection</a>
                        </div>
                    </div>
                    <div class="md:w-1/2 flex justify-center">
                        <div class="relative w-full max-w-md">
                            <div class="floating">
                                <img src="https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&q=80&w=500" alt="Farm field with crops" class="rounded-2xl shadow-2xl">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <section class="py-16">
                <div class="container mx-auto px-4">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl md:text-4xl font-bold mb-4">Smart Farming Features</h2>
                        <p class="text-xl text-gray-600 max-w-3xl mx-auto">Our platform offers everything you need to optimize your farming operations and maximize yields.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="feature-card bg-white p-6 rounded-xl shadow-md border border-gray-100 transition-all duration-300 text-center">
                            <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center text-primary mb-4 mx-auto">
                                <i class="fas fa-seedling text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Crop Recommendation</h3>
                            <p class="text-gray-600">Get AI-powered suggestions for the best crops to plant based on your soil, climate, and market conditions.</p>
                        </div>

                        <div class="feature-card bg-white p-6 rounded-xl shadow-md border border-gray-100 transition-all duration-300 text-center">
                            <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center text-blue-500 mb-4 mx-auto">
                                <i class="fas fa-bug text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Pest Detection</h3>
                            <p class="text-gray-600">Upload images of affected plants and get instant identification of pests and diseases with treatment solutions.</p>
                        </div>

                        <div class="feature-card bg-white p-6 rounded-xl shadow-md border border-gray-100 transition-all duration-300 text-center">
                            <div class="w-14 h-14 bg-yellow-100 rounded-xl flex items-center justify-center text-yellow-500 mb-4 mx-auto">
                                <i class="fas fa-chart-line text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Market Prices</h3>
                            <p class="text-gray-600">Access real-time market prices for your produce and get alerts for the best time to sell for maximum profit.</p>
                        </div>

                        <div class="feature-card bg-white p-6 rounded-xl shadow-md border border-gray-100 transition-all duration-300 text-center">
                            <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center text-purple-500 mb-4 mx-auto">
                                <i class="fas fa-cloud-sun text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Weather Forecast</h3>
                            <p class="text-gray-600">Get hyperlocal weather forecasts and alerts to protect your crops from unexpected weather conditions.</p>
                        </div>
                    </div>
                </div>
            </section>
        </section>

        <!-- Crop Recommendation Section -->
        <section id="crop-recommendation" class="section py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold mb-2 text-center">Crop Recommendation</h2>
                <p class="text-xl text-gray-600 mb-10 text-center">Get AI-powered crop suggestions based on your farm conditions</p>

                <div class="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow-md">
                    <form id="crop-form" class="space-y-6">
                        <div>
                            <label class="block text-gray-700 mb-2" for="soil-type">Soil Type</label>
                            <select id="soil-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
                                <option value="">Select Soil Type</option>
                                <option value="sandy">Sandy</option>
                                <option value="clay">Clay</option>
                                <option value="loamy">Loamy</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-gray-700 mb-2" for="water-availability">Water Availability</label>
                            <select id="water-availability" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
                                <option value="">Select Water Availability</option>
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-gray-700 mb-2" for="season">Season</label>
                            <select id="season" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
                                <option value="">Select Season</option>
                                <option value="kharif">Kharif</option>
                                <option value="rabi">Rabi</option>
                            </select>
                        </div>

                        <button type="submit" class="w-full bg-primary text-white px-4 py-3 rounded-lg hover:bg-secondary transition-colors">Get Recommendations</button>
                    </form>

                    <div id="recommendation-results" class="mt-8 hidden">
                        <h3 class="text-2xl font-bold mb-4 text-primary">Recommended Crops</h3>
                        <div id="crops-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Results will be inserted here by JavaScript -->
                        </div>
                        <button id="download-pdf" class="mt-6 bg-accent text-white px-4 py-2 rounded-lg hover:bg-secondary transition-colors">Download Report</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pest Detection Section -->
        <section id="pest-detection" class="section py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold mb-2 text-center">Pest Detection</h2>
                <p class="text-xl text-gray-600 mb-10 text-center">Upload an image to identify pests and get treatment suggestions</p>

                <div class="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow-md">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-4">Upload an image of the affected plant</p>
                        <input type="file" id="pest-image" accept="image/*" class="hidden">
                        <label for="pest-image" class="bg-primary text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-secondary transition-colors">Choose Image</label>
                        <p class="text-sm text-gray-500 mt-2">JPEG, PNG, or JPG files (max 5MB)</p>
                    </div>

                    <button id="analyze-pest" class="w-full bg-primary text-white px-4 py-3 rounded-lg mt-6 hover:bg-secondary transition-colors">Analyze Image</button>

                    <div id="pest-results" class="mt-8 hidden">
                        <h3 class="text-2xl font-bold mb-4 text-primary">Detection Results</h3>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <p class="text-lg font-semibold">Detected Pest: <span id="pest-name">Aphids</span> (Confidence: <span id="pest-confidence">85%</span>)</p>
                            <p class="mt-2"><span class="font-semibold">Recommended Treatment:</span> <span id="pest-treatment">Neem oil spray or insecticidal soap</span></p>
                            <p class="mt-2"><span class="font-semibold">Prevention Tips:</span> <span id="pest-prevention">Introduce beneficial insects like ladybugs, avoid over-fertilizing with nitrogen</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Market Prices Section -->
        <section id="market-prices" class="section py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold mb-2 text-center">Market Prices</h2>
                <p class="text-xl text-gray-600 mb-10 text-center">Current market prices and trends for agricultural produce</p>

                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold mb-4 text-primary">Price Trends</h3>
                        <div class="h-80">
                            <canvas id="price-chart"></canvas>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-primary">Current Prices</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Crop</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price (₹/kg)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trend</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Change</th>
                                    </tr>
                                </thead>
                                <tbody id="price-table" class="bg-white divide-y divide-gray-200">
                                    <!-- Prices will be inserted here by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Weather Section -->
        <section id="weather" class="section py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold mb-2 text-center">Weather Forecast</h2>
                <p class="text-xl text-gray-600 mb-10 text-center">Current weather and forecast for your location</p>

                <div class="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow-md">
                    <div class="flex items-center mb-6">
                        <input type="text" id="weather-location" placeholder="Enter your location" class="flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:ring-primary focus:border-primary">
                        <button id="get-weather" class="bg-primary text-white px-4 py-2 rounded-r-lg hover:bg-secondary transition-colors">Get Weather</button>
                    </div>

                    <div id="weather-results" class="hidden">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold" id="weather-city">New Delhi</h3>
                            <p class="text-gray-600" id="weather-date">Monday, June 12</p>
                        </div>

                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <img id="weather-icon" src="https://openweathermap.org/img/wn/01d@2x.png" alt="Weather icon" class="w-24 h-24">
                            </div>
                            <div class="text-right">
                                <p class="text-5xl font-bold" id="weather-temp">32°C</p>
                                <p class="text-gray-600" id="weather-desc">Sunny</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-600">Humidity</p>
                                <p class="text-xl font-semibold" id="weather-humidity">45%</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-600">Wind</p>
                                <p class="text-xl font-semibold" id="weather-wind">5.2 km/h</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-600">Rain</p>
                                <p class="text-xl font-semibold" id="weather-rain">0%</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-600">Pressure</p>
                                <p class="text-xl font-semibold" id="weather-pressure">1012 hPa</p>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-xl font-bold mb-4">5-Day Forecast</h4>
                            <div id="weather-forecast" class="grid grid-cols-2 md:grid-cols-5 gap-4">
                                <!-- Forecast will be inserted here by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-bold mr-2">AV</div>
                        <span class="text-xl font-bold text-primary">Agro<span class="text-accent">Vision</span></span>
                    </div>
                    <p class="text-gray-400 mb-4">Smart farming solutions for higher yields and sustainable practices.</p>
                </div>

                <div>
                    <h3 class="text-lg font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" data-section="home" class="text-gray-400 hover:text-white">Home</a></li>
                        <li><a href="#" data-section="crop-recommendation" class="text-gray-400 hover:text-white">Crop Recommendation</a></li>
                        <li><a href="#" data-section="pest-detection" class="text-gray-400 hover:text-white">Pest Detection</a></li>
                        <li><a href="#" data-section="market-prices" class="text-gray-400 hover:text-white">Market Prices</a></li>
                        <li><a href="#" data-section="weather" class="text-gray-400 hover:text-white">Weather</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-bold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Farming Tips</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Crop Calendar</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Government Schemes</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-bold mb-4">Contact Us</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2 text-gray-400"></i>
                            <span class="text-gray-400">support@agrovision.com</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone mr-2 text-gray-400"></i>
                            <span class="text-gray-400">+91 9876543210</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2023 AgroVision. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <script>
        // Crop data
        const cropData = [{
            name: "Wheat",
            soil: ["loamy"],
            water: "medium",
            season: "rabi",
            profit: "High",
            image: "https://images.unsplash.com/photo-1501529309684-4f120b85d10f?auto=format&fit=crop&q=80&w=300",
            description: "Well-suited for loamy soil with medium water availability during Rabi season."
        }, {
            name: "Rice",
            soil: ["clay"],
            water: "high",
            season: "kharif",
            profit: "Medium",
            image: "https://images.unsplash.com/photo-1586201375765-7963465eabf7?auto=format&fit=crop&q=80&w=300",
            description: "Requires clay soil with high water availability during Kharif season."
        }, {
            name: "Cotton",
            soil: ["sandy", "loamy"],
            water: "medium",
            season: "kharif",
            profit: "High",
            image: "https://images.unsplash.com/photo-1611176279300-5d3aa0283f8b?auto=format&fit=crop&q=80&w=300",
            description: "Grows well in sandy or loamy soil with medium water during Kharif season."
        }, {
            name: "Soybean",
            soil: ["loamy"],
            water: "medium",
            season: "kharif",
            profit: "Medium",
            image: "https://images.unsplash.com/photo-1592401013965-6cc7c2e0fdbe?auto=format&fit=crop&q=80&w=300",
            description: "Thrives in loamy soil with medium water during Kharif season."
        }, {
            name: "Maize",
            soil: ["sandy", "loamy"],
            water: "medium",
            season: "kharif",
            profit: "Medium",
            image: "https://images.unsplash.com/photo-1626603726340-83199c6e9333?auto=format&fit=crop&q=80&w=300",
            description: "Suitable for sandy or loamy soil with medium water during Kharif season."
        }, {
            name: "Pulses",
            soil: ["sandy", "loamy"],
            water: "low",
            season: "rabi",
            profit: "Medium",
            image: "https://images.unsplash.com/photo-1592417817096-5afb8cfc6c6a?auto=format&fit=crop&q=80&w=300",
            description: "Grows well in sandy or loamy soil with low water during Rabi season."
        }];

        // Market price data
        const marketData = [{
            crop: "Wheat",
            price: "₹2,200",
            trend: "up",
            change: "+2.3%"
        }, {
            crop: "Rice",
            price: "₹3,100",
            trend: "down",
            change: "-1.5%"
        }, {
            crop: "Cotton",
            price: "₹6,500",
            trend: "up",
            change: "+4.2%"
        }, {
            crop: "Soybean",
            price: "₹4,800",
            trend: "up",
            change: "+0.8%"
        }, {
            crop: "Maize",
            price: "₹1,900",
            trend: "down",
            change: "-2.1%"
        }, {
            crop: "Pulses",
            price: "₹7,200",
            trend: "up",
            change: "+3.7%"
        }];

        // Pest data
        const pestData = [{
            name: "Aphids",
            treatment: "Neem oil spray or insecticidal soap",
            prevention: "Introduce beneficial insects like ladybugs, avoid over-fertilizing with nitrogen"
        }, {
            name: "Bollworms",
            treatment: "Spinosad or Bacillus thuringiensis (Bt) spray",
            prevention: "Practice crop rotation, use pheromone traps"
        }, {
            name: "Leaf Miners",
            treatment: "Remove affected leaves, use neem oil",
            prevention: "Use floating row covers, remove weed hosts"
        }, {
            name: "Whiteflies",
            treatment: "Yellow sticky traps, insecticidal soap",
            prevention: "Use reflective mulch, encourage natural enemies"
        }, {
            name: "Spider Mites",
            treatment: "Spray plants with water, use miticides if severe",
            prevention: "Maintain high humidity, avoid water stress"
        }];

        // Navigation
        document.querySelectorAll('a[data-section]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('data-section');

                // Update active nav item
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                link.classList.add('active');

                // Show selected section
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');

                // If market prices section, render chart
                if (sectionId === 'market-prices') {
                    renderMarketChart();
                    renderPriceTable();
                }
            });
        });

        // Crop recommendation form
        document.getElementById('crop-form').addEventListener('submit', (e) => {
            e.preventDefault();

            const soilType = document.getElementById('soil-type').value;
            const waterAvailability = document.getElementById('water-availability').value;
            const season = document.getElementById('season').value;

            if (!soilType || !waterAvailability || !season) {
                alert('Please fill all fields');
                return;
            }

            // Find matching crops
            const matchedCrops = cropData.filter(crop =>
                crop.soil.includes(soilType) &&
                crop.water === waterAvailability &&
                crop.season === season
            );

            const resultsContainer = document.getElementById('recommendation-results');
            const cropsList = document.getElementById('crops-list');

            // Clear previous results
            cropsList.innerHTML = '';

            if (matchedCrops.length === 0) {
                cropsList.innerHTML = '<p class="text-center col-span-2 py-4">No crops match your criteria. Please try different parameters.</p>';
            } else {
                matchedCrops.forEach(crop => {
                    const cropCard = document.createElement('div');
                    cropCard.className = 'bg-gray-50 p-4 rounded-lg';
                    cropCard.innerHTML = `
                        <img src="${crop.image}" alt="${crop.name}" class="w-full h-32 object-cover rounded-lg mb-2 crop-image">
                        <h4 class="font-bold text-lg">${crop.name}</h4>
                        <p class="text-sm text-gray-600 mb-2">Profit Potential: <span class="font-semibold">${crop.profit}</span></p>
                        <p class="text-sm">${crop.description}</p>
                    `;
                    cropsList.appendChild(cropCard);
                });
            }

            resultsContainer.classList.remove('hidden');

            // Store results for PDF generation
            localStorage.setItem('cropRecommendations', JSON.stringify({
                soilType,
                waterAvailability,
                season,
                crops: matchedCrops
            }));
        });

        // Pest detection
        document.getElementById('analyze-pest').addEventListener('click', () => {
            const fileInput = document.getElementById('pest-image');

            if (!fileInput.files || fileInput.files.length === 0) {
                alert('Please select an image first');
                return;
            }

            // Simulate analysis with random pest
            const randomPest = pestData[Math.floor(Math.random() * pestData.length)];
            const randomConfidence = (85 + Math.floor(Math.random() * 10)) + '%';

            document.getElementById('pest-name').textContent = randomPest.name;
            document.getElementById('pest-confidence').textContent = randomConfidence;
            document.getElementById('pest-treatment').textContent = randomPest.treatment;
            document.getElementById('pest-prevention').textContent = randomPest.prevention;

            document.getElementById('pest-results').classList.remove('hidden');
        });

        // Market price chart
        function renderMarketChart() {
            const ctx = document.getElementById('price-chart').getContext('2d');

            // Sample data for the chart
            const data = {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Wheat (₹/qtl)',
                    data: [2100, 2150, 2200, 2180, 2220, 2250],
                    borderColor: '#16a34a',
                    backgroundColor: 'rgba(22, 163, 74, 0.1)',
                    fill: true,
                    tension: 0.4
                }, {
                    label: 'Rice (₹/qtl)',
                    data: [3000, 3100, 3050, 3080, 3150, 3100],
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            };

            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Commodity Price Trends (Last 6 Months)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Price (₹/Quintal)'
                            }
                        }
                    }
                }
            };

            // Destroy previous chart if it exists
            if (window.priceChartInstance) {
                window.priceChartInstance.destroy();
            }

            window.priceChartInstance = new Chart(ctx, config);
        }

        // Market price table
        function renderPriceTable() {
            const tableBody = document.getElementById('price-table');
            tableBody.innerHTML = '';

            marketData.forEach(item => {
                const row = document.createElement('tr');
                const trendIcon = item.trend === 'up' ? '↑' : '↓';
                const trendColor = item.trend === 'up' ? 'text-green-600' : 'text-red-600';

                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">${item.crop}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${item.price}</td>
                    <td class="px-6 py-4 whitespace-nowrap ${trendColor}">${trendIcon}</td>
                    <td class="px-6 py-4 whitespace-nowrap ${trendColor}">${item.change}</td>
                `;

                tableBody.appendChild(row);
            });
        }

        // Weather data
        document.getElementById('get-weather').addEventListener('click', () => {
            const location = document.getElementById('weather-location').value.trim();

            if (!location) {
                alert('Please enter a location');
                return;
            }

            // For demo purposes, we'll use static data since we can't make actual API calls from file
            // In a real implementation, you would fetch from OpenWeather API

            const weatherData = {
                city: location,
                date: new Date().toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }),
                temp: Math.floor(Math.random() * 15) + 25 + '°C', // Random temp between 25-40°C
                desc: ['Sunny', 'Partly Cloudy', 'Cloudy', 'Light Rain'][Math.floor(Math.random() * 4)],
                humidity: Math.floor(Math.random() * 40) + 30 + '%', // 30-70%
                wind: (Math.random() * 10).toFixed(1) + ' km/h',
                rain: Math.floor(Math.random() * 30) + '%',
                pressure: (1000 + Math.floor(Math.random() * 20)) + ' hPa'
            };

            // Update weather display
            document.getElementById('weather-city').textContent = weatherData.city;
            document.getElementById('weather-date').textContent = weatherData.date;
            document.getElementById('weather-temp').textContent = weatherData.temp;
            document.getElementById('weather-desc').textContent = weatherData.desc;
            document.getElementById('weather-humidity').textContent = weatherData.humidity;
            document.getElementById('weather-wind').textContent = weatherData.wind;
            document.getElementById('weather-rain').textContent = weatherData.rain;
            document.getElementById('weather-pressure').textContent = weatherData.pressure;

            // Set appropriate weather icon
            const iconMap = {
                'Sunny': '01d',
                'Partly Cloudy': '02d',
                'Cloudy': '03d',
                'Light Rain': '10d'
            };

            const iconCode = iconMap[weatherData.desc] || '01d';
            document.getElementById('weather-icon').src = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;

            // Generate forecast
            const forecastContainer = document.getElementById('weather-forecast');
            forecastContainer.innerHTML = '';

            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
            days.forEach(day => {
                const forecastTemp = Math.floor(Math.random() * 15) + 20; // 20-35°C
                const forecastDesc = ['Sunny', 'Partly Cloudy', 'Cloudy', 'Light Rain'][Math.floor(Math.random() * 4)];
                const forecastIconCode = iconMap[forecastDesc] || '01d';

                const forecastItem = document.createElement('div');
                forecastItem.className = 'text-center bg-gray-50 p-3 rounded-lg';
                forecastItem.innerHTML = `
                    <p class="font-semibold">${day}</p>
                    <img src="https://openweathermap.org/img/wn/${forecastIconCode}.png" alt="${forecastDesc}" class="mx-auto my-2">
                    <p class="text-lg font-bold">${forecastTemp}°C</p>
                    <p class="text-sm text-gray-600">${forecastDesc}</p>
                `;

                forecastContainer.appendChild(forecastItem);
            });

            document.getElementById('weather-results').classList.remove('hidden');
        });

        // PDF report generation
        document.getElementById('download-pdf').addEventListener('click', () => {
            // In a real implementation, you would use jsPDF to generate a PDF report
            alert('PDF report generation would be implemented here with jsPDF. This would include the crop recommendations and market price information.');

            // Example of how it might work:
            /*
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(22);
            doc.text('AgroVision Crop Recommendation Report', 20, 20);
            
            doc.setFontSize(16);
            doc.text('Recommended Crops:', 20, 40);
            
            // Add crop details
            let yPosition = 50;
            const storedData = JSON.parse(localStorage.getItem('cropRecommendations'));
            
            if (storedData && storedData.crops) {
                storedData.crops.forEach((crop, index) => {
                    if (yPosition > 250) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    doc.setFontSize(14);
                    doc.text(`${index + 1}. ${crop.name}`, 20, yPosition);
                    doc.setFontSize(12);
                    doc.text(`Profit Potential: ${crop.profit}`, 30, yPosition + 10);
                    doc.text(`Description: ${crop.description}`, 30, yPosition + 20);
                    
                    yPosition += 40;
                });
            }
            
            // Save the PDF
            doc.save('agrovision-report.pdf');
            */
        });

        // Initialize market chart and table when page loads
        document.addEventListener('DOMContentLoaded', () => {
            renderMarketChart();
            renderPriceTable();
        });
    </script>
</body>

</html>

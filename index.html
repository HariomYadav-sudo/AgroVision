<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmers App - Complete Solution</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
            --primary-color: #2e7d32;
            --secondary-color: #7cb342;
            --light-color: #f1f8e9;
            --dark-color: #1b5e20;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .navbar {
            background-color: var(--primary-color);
        }
        
        .navbar-brand, .nav-link {
            color: white !important;
        }
        
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1625246333195-78d9c38ad449?ixlib=rb-4.0.3') center/cover no-repeat;
            color: white;
            padding: 100px 0;
            text-align: center;
        }
        
        .feature-card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            height: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        .feature-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--dark-color);
            border-color: var(--dark-color);
        }
        
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chatbot-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        
        .chat-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 350px;
            height: 400px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
        }
        
        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .user-message {
            justify-content: flex-end;
        }
        
        .bot-message {
            justify-content: flex-start;
        }
        
        .message-content {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 18px;
        }
        
        .user-message .message-content {
            background-color: #e3f2fd;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message .message-content {
            background-color: #f1f8e9;
            border-bottom-left-radius: 5px;
        }
        
        .chat-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #eee;
        }
        
        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0;
        }
        
        .language-selector {
            max-width: 200px;
        }
        
        .crop-card, .disease-card, .scheme-card {
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .crop-card:hover, .disease-card:hover, .scheme-card:hover {
            transform: translateY(-5px);
        }
        
        .card-img-top {
            height: 200px;
            object-fit: cover;
        }
        
        .page-section {
            padding: 60px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--dark-color);
            position: relative;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 3px;
            background-color: var(--secondary-color);
            margin: 15px auto;
        }
        
        /* Profile Specific Styles */
        .profile-card {
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .profile-header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .avatar-container {
            position: relative;
            display: inline-block;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid white;
            object-fit: cover;
            background-color: #e9f5e9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--primary-color);
        }
        
        .avatar-edit {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        
        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .profile-body {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
            color: #444;
        }
        
        .save-btn {
            background-color: var(--primary-color);
            border: none;
            padding: 10px 25px;
            font-weight: 600;
        }
        
        .save-btn:hover {
            background-color: var(--dark-color);
        }
        
        .cancel-btn {
            margin-right: 10px;
        }
        
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .crop-tag {
            display: inline-block;
            background-color: #e9f5e9;
            color: var(--dark-color);
            padding: 5px 12px;
            border-radius: 20px;
            margin: 5px 5px 5px 0;
            font-size: 0.9rem;
        }
        
        .crop-tag .remove {
            margin-left: 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Mock data for demonstration
        const mockCrops = [
            { id: 1, name: 'Wheat', season: 'Rabi', yield: '4.5 tons/ha', image: 'https://images.unsplash.com/photo-1500937386664-56d1dfef3854?ixlib=rb-4.0.3' },
            { id: 2, name: 'Rice', season: 'Kharif', yield: '6.2 tons/ha', image: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?ixlib=rb-4.0.3' },
            { id: 3, name: 'Corn', season: 'Kharif', yield: '7.1 tons/ha', image: 'https://images.unsplash.com/photo-1625246333195-78d9c38ad449?ixlib=rb-4.0.3' }
        ];

        const mockDiseases = [
            { id: 1, name: 'Leaf Rust', crop: 'Wheat', image: 'https://images.unsplash.com/photo-1516426122078-c23e76319801?ixlib=rb-4.0.3', severity: 'Medium' },
            { id: 2, name: 'Blast', crop: 'Rice', image: 'https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3', severity: 'High' },
            { id: 3, name: 'Blight', crop: 'Tomato', image: 'https://images.unsplash.com/photo-1591637333184-19aa84b3e01f?ixlib=rb-4.0.3', severity: 'Low' }
        ];

        const mockSchemes = [
            { id: 1, name: 'PM-KISAN', description: 'Financial support to farmers', eligibility: 'All farmer families', link: '#' },
            { id: 2, name: 'Soil Health Card', description: 'Help farmers improve soil health', eligibility: 'All farmers', link: '#' },
            { id: 3, name: 'Crop Insurance', description: 'Protection against crop loss', eligibility: 'All farmers', link: '#' }
        ];

        const mockExperts = [
            { id: 1, name: 'Dr. Rajesh Kumar', specialization: 'Agronomy', experience: '15 years', contact: '9876543210' },
            { id: 2, name: 'Dr. Priya Singh', specialization: 'Plant Pathology', experience: '12 years', contact: '9876543211' },
            { id: 3, name: 'Dr. Amit Sharma', specialization: 'Soil Science', experience: '18 years', contact: '9876543212' }
        ];

        // Mock user data
        const mockUserData = {
            id: 1,
            name: "Ramesh Kumar",
            email: "ramesh.kumar@example.com",
            phone: "+91 9876543210",
            location: "Punjab, India",
            farmSize: "5 acres",
            soilType: "Loamy",
            mainCrops: ["Wheat", "Rice"],
            joinDate: "January 2023",
            avatar: null,
            notifications: true,
            smsAlerts: false
        };

        // Available crops for selection
        const availableCrops = [
            "Wheat", "Rice", "Corn", "Soybean", "Cotton", 
            "Sugarcane", "Tomato", "Potato", "Onion", "Pulses"
        ];

        // API Service Mocks
        const ApiService = {
            cropRecommendation: {
                getRecommendations: async (location, soilType) => {
                    // Simulate API call
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve(mockCrops);
                        }, 1000);
                    });
                }
            },
            diseaseDetection: {
                detect: async (image) => {
                    // Simulate API call
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve(mockDiseases[0]);
                        }, 1500);
                    });
                }
            },
            expertFinder: {
                findExperts: async (specialization, location) => {
                    // Simulate API call
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve(mockExperts);
                        }, 1000);
                    });
                }
            },
            govSchemes: {
                getSchemes: async () => {
                    // Simulate API call
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve(mockSchemes);
                        }, 800);
                    });
                }
            }
        };

        // Components
        const Navbar = () => {
            return (
                <nav className="navbar navbar-expand-lg navbar-dark">
                    <div className="container">
                        <a className="navbar-brand" href="#">
                            <i className="fas fa-tractor me-2"></i>Farmers App
                        </a>
                        <button className="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                            <span className="navbar-toggler-icon"></span>
                        </button>
                        <div className="collapse navbar-collapse" id="navbarNav">
                            <ul className="navbar-nav ms-auto">
                                <li className="nav-item">
                                    <a className="nav-link" href="#home">Home</a>
                                </li>
                                <li className="nav-item">
                                    <a className="nav-link" href="#crop-recommendation">Crop Recommendation</a>
                                </li>
                                <li className="nav-item">
                                    <a className="nav-link" href="#disease-detection">Disease Detection</a>
                                </li>
                                <li className="nav-item">
                                    <a className="nav-link" href="#expert-finder">Expert Finder</a>
                                </li>
                                <li className="nav-item">
                                    <a className="nav-link" href="#gov-schemes">Government Schemes</a>
                                </li>
                                <li className="nav-item">
                                    <a className="nav-link" href="#profile">
                                        <i className="fas fa-user"></i>
                                    </a>
                                </li>
                                <li className="nav-item">
                                    <select className="form-select form-select-sm language-selector mt-1">
                                        <option>English</option>
                                        <option>Hindi</option>
                                        <option>Marathi</option>
                                        <option>Telugu</option>
                                    </select>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            );
        };

        const Footer = () => {
            return (
                <footer className="footer">
                    <div className="container">
                        <div className="row">
                            <div className="col-md-4">
                                <h5>Farmers App</h5>
                                <p>Empowering farmers with technology and information for better agricultural practices.</p>
                            </div>
                            <div className="col-md-4">
                                <h5>Quick Links</h5>
                                <ul className="list-unstyled">
                                    <li><a href="#crop-recommendation" className="text-white">Crop Recommendation</a></li>
                                    <li><a href="#disease-detection" className="text-white">Disease Detection</a></li>
                                    <li><a href="#expert-finder" className="text-white">Expert Finder</a></li>
                                </ul>
                            </div>
                            <div className="col-md-4">
                                <h5>Contact Us</h5>
                                <p><i className="fas fa-phone me-2"></i>+91 1800-123-4567</p>
                                <p><i className="fas fa-envelope me-2"></i>support@farmersapp.com</p>
                            </div>
                        </div>
                        <hr className="mt-4" />
                        <div className="text-center">
                            <p>&copy; 2023 Farmers App. All rights reserved.</p>
                        </div>
                    </div>
                </footer>
            );
        };

        const Loader = () => {
            return (
                <div className="d-flex justify-content-center align-items-center py-5">
                    <div className="spinner-border text-success" role="status">
                        <span className="visually-hidden">Loading...</span>
                    </div>
                </div>
            );
        };

        const CropCard = ({ crop }) => {
            return (
                <div className="card crop-card">
                    <img src={crop.image} className="card-img-top" alt={crop.name} />
                    <div className="card-body">
                        <h5 className="card-title">{crop.name}</h5>
                        <p className="card-text"><strong>Season:</strong> {crop.season}</p>
                        <p className="card-text"><strong>Expected Yield:</strong> {crop.yield}</p>
                        <button className="btn btn-sm btn-outline-primary">View Details</button>
                    </div>
                </div>
            );
        };

        const DiseaseCard = ({ disease }) => {
            return (
                <div className="card disease-card">
                    <img src={disease.image} className="card-img-top" alt={disease.name} />
                    <div className="card-body">
                        <h5 className="card-title">{disease.name}</h5>
                        <p className="card-text"><strong>Crop:</strong> {disease.crop}</p>
                        <p className="card-text"><strong>Severity:</strong> 
                            <span className={`badge ${disease.severity === 'High' ? 'bg-danger' : disease.severity === 'Medium' ? 'bg-warning' : 'bg-success'} ms-2`}>
                                {disease.severity}
                            </span>
                        </p>
                        <button className="btn btn-sm btn-outline-primary">View Treatment</button>
                    </div>
                </div>
            );
        };

        const SchemeCard = ({ scheme }) => {
            return (
                <div className="card scheme-card">
                    <div className="card-body">
                        <h5 className="card-title">{scheme.name}</h5>
                        <p className="card-text">{scheme.description}</p>
                        <p><strong>Eligibility:</strong> {scheme.eligibility}</p>
                        <a href={scheme.link} className="btn btn-sm btn-primary">Apply Now</a>
                    </div>
                </div>
            );
        };

        const ChatWindow = () => {
            const [messages, setMessages] = React.useState([
                { sender: 'bot', content: 'Hello! How can I help you with your farming queries today?' }
            ]);
            const [inputMessage, setInputMessage] = React.useState('');
            const [isOpen, setIsOpen] = React.useState(false);

            const handleSendMessage = () => {
                if (inputMessage.trim() === '') return;
                
                // Add user message
                const newMessages = [...messages, { sender: 'user', content: inputMessage }];
                setMessages(newMessages);
                setInputMessage('');
                
                // Simulate bot response after a short delay
                setTimeout(() => {
                    setMessages([...newMessages, { 
                        sender: 'bot', 
                        content: 'Thanks for your question. I can help with crop recommendations, disease identification, and information about government schemes.' 
                    }]);
                }, 1000);
            };

            const toggleChat = () => {
                setIsOpen(!isOpen);
            };

            return (
                <div className="chatbot-container">
                    <div className="chatbot-btn" onClick={toggleChat}>
                        <i className="fas fa-comments fa-lg"></i>
                    </div>
                    <div className="chat-window" style={{ display: isOpen ? 'flex' : 'none' }}>
                        <div className="chat-header">
                            <h6 className="mb-0">Farming Assistant</h6>
                            <button type="button" className="btn-close btn-close-white" onClick={toggleChat}></button>
                        </div>
                        <div className="chat-messages">
                            {messages.map((message, index) => (
                                <div key={index} className={`message ${message.sender === 'user' ? 'user-message' : 'bot-message'}`}>
                                    <div className="message-content">
                                        {message.content}
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="chat-input">
                            <input 
                                type="text" 
                                className="form-control me-2" 
                                placeholder="Type your message..." 
                                value={inputMessage}
                                onChange={(e) => setInputMessage(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                            />
                            <button className="btn btn-primary" onClick={handleSendMessage}>
                                <i className="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Toast Notification Component
        const Toast = ({ message, type, onClose }) => {
            React.useEffect(() => {
                const timer = setTimeout(() => {
                    onClose();
                }, 3000);

                return () => clearTimeout(timer);
            }, [onClose]);

            return (
                <div className={`toast show align-items-center text-white bg-${type}`} role="alert">
                    <div className="d-flex">
                        <div className="toast-body">
                            <i className={`fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} me-2`}></i>
                            {message}
                        </div>
                        <button type="button" className="btn-close btn-close-white me-2 m-auto" onClick={onClose}></button>
                    </div>
                </div>
            );
        };

        const Home = () => {
            return (
                <div>
                    <section id="home" className="hero-section">
                        <div className="container">
                            <h1 className="display-4 fw-bold">Empowering Farmers with Technology</h1>
                            <p className="lead">Get expert advice, crop recommendations, disease detection, and information about government schemes - all in one place.</p>
                            <button className="btn btn-lg btn-primary mt-3">Get Started</button>
                        </div>
                    </section>

                    <section className="py-5">
                        <div className="container">
                            <h2 className="section-title">Our Services</h2>
                            <div className="row g-4">
                                <div className="col-md-4">
                                    <div className="card feature-card text-center h-100">
                                        <div className="card-body">
                                            <div className="feature-icon">
                                                <i className="fas fa-seedling"></i>
                                            </div>
                                            <h5 className="card-title">Crop Recommendation</h5>
                                            <p className="card-text">Get personalized crop recommendations based on your soil type, location, and climate conditions.</p>
                                            <a href="#crop-recommendation" className="btn btn-outline-primary">Explore</a>
                                        </div>
                                    </div>
                                </div>
                                <div className="col-md-4">
                                    <div className="card feature-card text-center h-100">
                                        <div className="card-body">
                                            <div className="feature-icon">
                                                <i className="fas fa-bug"></i>
                                            </div>
                                            <h5 className="card-title">Disease Detection</h5>
                                            <p className="card-text">Upload images of affected crops to identify diseases and get treatment recommendations.</p>
                                            <a href="#disease-detection" className="btn btn-outline-primary">Explore</a>
                                        </div>
                                    </div>
                                </div>
                                <div className="col-md-4">
                                    <div className="card feature-card text-center h-100">
                                        <div className="card-body">
                                            <div className="feature-icon">
                                                <i className="fas fa-handshake"></i>
                                            </div>
                                            <h5 className="card-title">Government Schemes</h5>
                                            <p className="card-text">Discover and apply for government schemes that you're eligible for to support your farming activities.</p>
                                            <a href="#gov-schemes" className="btn btn-outline-primary">Explore</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            );
        };

        const CropRecommendation = () => {
            const [location, setLocation] = React.useState('');
            const [soilType, setSoilType] = React.useState('');
            const [recommendations, setRecommendations] = React.useState([]);
            const [loading, setLoading] = React.useState(false);

            const handleGetRecommendations = async () => {
                setLoading(true);
                try {
                    const data = await ApiService.cropRecommendation.getRecommendations(location, soilType);
                    setRecommendations(data);
                } catch (error) {
                    console.error('Error fetching recommendations:', error);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <section id="crop-recommendation" className="page-section bg-light">
                    <div className="container">
                        <h2 className="section-title">Crop Recommendation</h2>
                        <div className="row">
                            <div className="col-md-4">
                                <div className="card p-4">
                                    <h5 className="mb-4">Provide Your Farm Details</h5>
                                    <div className="mb-3">
                                        <label className="form-label">Location</label>
                                        <input 
                                            type="text" 
                                            className="form-control" 
                                            value={location}
                                            onChange={(e) => setLocation(e.target.value)}
                                            placeholder="Enter your location" 
                                        />
                                    </div>
                                    <div className="mb-3">
                                        <label className="form-label">Soil Type</label>
                                        <select 
                                            className="form-select"
                                            value={soilType}
                                            onChange={(e) => setSoilType(e.target.value)}
                                        >
                                            <option value="">Select soil type</option>
                                            <option value="clay">Clay</option>
                                            <option value="sandy">Sandy</option>
                                            <option value="loamy">Loamy</option>
                                            <option value="silt">Silt</option>
                                        </select>
                                    </div>
                                    <button 
                                        className="btn btn-primary w-100" 
                                        onClick={handleGetRecommendations}
                                        disabled={!location || !soilType}
                                    >
                                        Get Recommendations
                                    </button>
                                </div>
                            </div>
                            <div className="col-md-8">
                                <h4 className="mb-4">Recommended Crops</h4>
                                {loading ? (
                                    <Loader />
                                ) : recommendations.length > 0 ? (
                                    <div className="row">
                                        {recommendations.map(crop => (
                                            <div key={crop.id} className="col-md-6">
                                                <CropCard crop={crop} />
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="text-center py-5">
                                        <i className="fas fa-seedling fa-3x text-muted mb-3"></i>
                                        <p>Enter your farm details to get crop recommendations</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const DiseaseDetection = () => {
            const [selectedImage, setSelectedImage] = React.useState(null);
            const [result, setResult] = React.useState(null);
            const [loading, setLoading] = React.useState(false);

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setSelectedImage(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleDetectDisease = async () => {
                if (!selectedImage) return;
                
                setLoading(true);
                try {
                    const data = await ApiService.diseaseDetection.detect(selectedImage);
                    setResult(data);
                } catch (error) {
                    console.error('Error detecting disease:', error);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <section id="disease-detection" className="page-section">
                    <div className="container">
                        <h2 className="section-title">Disease Detection</h2>
                        <div className="row">
                            <div className="col-md-6">
                                <div className="card p-4">
                                    <h5 className="mb-4">Upload Crop Image</h5>
                                    <div className="mb-3">
                                        <label className="form-label">Select an image of the affected crop</label>
                                        <input 
                                            type="file" 
                                            className="form-control" 
                                            accept="image/*"
                                            onChange={handleImageUpload}
                                        />
                                    </div>
                                    {selectedImage && (
                                        <div className="text-center mt-4">
                                            <img 
                                                src={selectedImage} 
                                                alt="Uploaded" 
                                                className="img-fluid rounded"
                                                style={{ maxHeight: '300px' }}
                                            />
                                        </div>
                                    )}
                                    <button 
                                        className="btn btn-primary w-100 mt-4" 
                                        onClick={handleDetectDisease}
                                        disabled={!selectedImage}
                                    >
                                        Detect Disease
                                    </button>
                                </div>
                            </div>
                            <div className="col-md-6">
                                <h5 className="mb-4">Detection Result</h5>
                                {loading ? (
                                    <Loader />
                                ) : result ? (
                                    <DiseaseCard disease={result} />
                                ) : (
                                    <div className="text-center py-5">
                                        <i className="fas fa-bug fa-3x text-muted mb-3"></i>
                                        <p>Upload an image to detect crop diseases</p>
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="mt-5">
                            <h4 className="section-title">Common Diseases</h4>
                            <div className="row mt-4">
                                {mockDiseases.map(disease => (
                                    <div key={disease.id} className="col-md-4">
                                        <DiseaseCard disease={disease} />
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const ExpertFinder = () => {
            const [specialization, setSpecialization] = React.useState('');
            const [location, setLocation] = React.useState('');
            const [experts, setExperts] = React.useState([]);
            const [loading, setLoading] = React.useState(false);

            const handleFindExperts = async () => {
                setLoading(true);
                try {
                    const data = await ApiService.expertFinder.findExperts(specialization, location);
                    setExperts(data);
                } catch (error) {
                    console.error('Error finding experts:', error);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <section id="expert-finder" className="page-section bg-light">
                    <div className="container">
                        <h2 className="section-title">Expert Finder</h2>
                        <div className="row">
                            <div className="col-md-4">
                                <div className="card p-4">
                                    <h5 className="mb-4">Find an Expert</h5>
                                    <div className="mb-3">
                                        <label className="form-label">Specialization</label>
                                        <select 
                                            className="form-select"
                                            value={specialization}
                                            onChange={(e) => setSpecialization(e.target.value)}
                                        >
                                            <option value="">Select specialization</option>
                                            <option value="agronomy">Agronomy</option>
                                            <option value="pathology">Plant Pathology</option>
                                            <option value="soil">Soil Science</option>
                                            <option value="horticulture">Horticulture</option>
                                        </select>
                                    </div>
                                    <div className="mb-3">
                                        <label className="form-label">Location (optional)</label>
                                        <input 
                                            type="text" 
                                            className="form-control" 
                                            value={location}
                                            onChange={(e) => setLocation(e.target.value)}
                                            placeholder="Enter location" 
                                        />
                                    </div>
                                    <button 
                                        className="btn btn-primary w-100" 
                                        onClick={handleFindExperts}
                                        disabled={!specialization}
                                    >
                                        Find Experts
                                    </button>
                                </div>
                            </div>
                            <div className="col-md-8">
                                <h4 className="mb-4">Available Experts</h4>
                                {loading ? (
                                    <Loader />
                                ) : experts.length > 0 ? (
                                    <div className="row">
                                        {experts.map(expert => (
                                            <div key={expert.id} className="col-md-6 mb-4">
                                                <div className="card h-100">
                                                    <div className="card-body">
                                                        <h5 className="card-title">{expert.name}</h5>
                                                        <p className="card-text"><strong>Specialization:</strong> {expert.specialization}</p>
                                                        <p className="card-text"><strong>Experience:</strong> {expert.experience}</p>
                                                        <p className="card-text"><strong>Contact:</strong> {expert.contact}</p>
                                                        <button className="btn btn-sm btn-outline-primary">Contact Expert</button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="text-center py-5">
                                        <i className="fas fa-user-md fa-3x text-muted mb-3"></i>
                                        <p>Use the filters to find agricultural experts</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const GovSchemes = () => {
            const [schemes, setSchemes] = React.useState([]);
            const [loading, setLoading] = React.useState(false);

            React.useEffect(() => {
                const fetchSchemes = async () => {
                    setLoading(true);
                    try {
                        const data = await ApiService.govSchemes.getSchemes();
                        setSchemes(data);
                    } catch (error) {
                        console.error('Error fetching schemes:', error);
                    } finally {
                        setLoading(false);
                    }
                };

                fetchSchemes();
            }, []);

            return (
                <section id="gov-schemes" className="page-section">
                    <div className="container">
                        <h2 className="section-title">Government Schemes</h2>
                        <p className="text-center mb-5">Discover government schemes that can support your farming activities</p>
                        
                        {loading ? (
                            <Loader />
                        ) : schemes.length > 0 ? (
                            <div className="row">
                                {schemes.map(scheme => (
                                    <div key={scheme.id} className="col-md-4">
                                        <SchemeCard scheme={scheme} />
                                    </div>
                                ))}
                            </div>
                        ) : (
                            <div className="text-center py-5">
                                <i className="fas fa-exclamation-circle fa-3x text-muted mb-3"></i>
                                <p>No schemes available at the moment</p>
                            </div>
                        )}
                    </div>
                </section>
            );
        };

        const Profile = () => {
            const [userData, setUserData] = React.useState(mockUserData);
            const [editedData, setEditedData] = React.useState(mockUserData);
            const [isEditing, setIsEditing] = React.useState(false);
            const [newCrop, setNewCrop] = React.useState("");
            const [toast, setToast] = React.useState({ show: false, message: "", type: "" });

            // Handle input changes
            const handleInputChange = (field, value) => {
                setEditedData(prev => ({
                    ...prev,
                    [field]: value
                }));
            };

            // Add a new crop
            const addCrop = () => {
                if (newCrop && !editedData.mainCrops.includes(newCrop)) {
                    setEditedData(prev => ({
                        ...prev,
                        mainCrops: [...prev.mainCrops, newCrop]
                    }));
                    setNewCrop("");
                }
            };

            // Remove a crop
            const removeCrop = (cropToRemove) => {
                setEditedData(prev => ({
                    ...prev,
                    mainCrops: prev.mainCrops.filter(crop => crop !== cropToRemove)
                }));
            };

            // Save profile changes
            const saveProfile = () => {
                // Simulate API call
                setTimeout(() => {
                    setUserData(editedData);
                    setIsEditing(false);
                    showToast("Profile updated successfully!", "success");
                }, 800);
            };

            // Cancel editing
            const cancelEdit = () => {
                setEditedData(userData);
                setIsEditing(false);
            };

            // Show toast notification
            const showToast = (message, type) => {
                setToast({ show: true, message, type });
            };

            // Close toast
            const closeToast = () => {
                setToast({ show: false, message: "", type: "" });
            };

            // Handle avatar change
            const handleAvatarChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setEditedData(prev => ({
                            ...prev,
                            avatar: reader.result
                        }));
                    };
                    reader.readAsDataURL(file);
                }
            };

            return (
                <section id="profile" className="page-section bg-light">
                    <div className="container">
                        <h2 className="section-title">Your Profile</h2>
                        
                        <div className="row justify-content-center">
                            <div className="col-lg-8">
                                <div className="profile-card">
                                    <div className="profile-header">
                                        <div className="avatar-container">
                                            {editedData.avatar ? (
                                                <img src={editedData.avatar} alt="Avatar" className="profile-avatar" />
                                            ) : (
                                                <div className="profile-avatar">
                                                    <i className="fas fa-user"></i>
                                                </div>
                                            )}
                                            {isEditing && (
                                                <label className="avatar-edit" title="Change photo">
                                                    <i className="fas fa-camera text-primary"></i>
                                                    <input 
                                                        type="file" 
                                                        className="d-none" 
                                                        accept="image/*"
                                                        onChange={handleAvatarChange}
                                                    />
                                                </label>
                                            )}
                                        </div>
                                        <h3 className="mt-3">{userData.name}</h3>
                                        <p className="mb-0">Member since {userData.joinDate}</p>
                                        
                                        <div className="profile-stats">
                                            <div className="stat-item">
                                                <div className="stat-value">{userData.mainCrops.length}</div>
                                                <div className="stat-label">Crops</div>
                                            </div>
                                            <div className="stat-item">
                                                <div className="stat-value">{userData.farmSize}</div>
                                                <div className="stat-label">Farm Size</div>
                                            </div>
                                            <div className="stat-item">
                                                <div className="stat-value">{userData.soilType}</div>
                                                <div className="stat-label">Soil Type</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="profile-body">
                                        {isEditing ? (
                                            <div>
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <label className="form-label">Full Name</label>
                                                            <input 
                                                                type="text" 
                                                                className="form-control" 
                                                                value={editedData.name}
                                                                onChange={(e) => handleInputChange('name', e.target.value)}
                                                            />
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <label className="form-label">Email Address</label>
                                                            <input 
                                                                type="email" 
                                                                className="form-control" 
                                                                value={editedData.email}
                                                                onChange={(e) => handleInputChange('email', e.target.value)}
                                                            />
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <label className="form-label">Phone Number</label>
                                                            <input 
                                                                type="tel" 
                                                                className="form-control" 
                                                                value={editedData.phone}
                                                                onChange={(e) => handleInputChange('phone', e.target.value)}
                                                            />
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <label className="form-label">Location</label>
                                                            <input 
                                                                type="text" 
                                                                className="form-control" 
                                                                value={editedData.location}
                                                                onChange={(e) => handleInputChange('location', e.target.value)}
                                                            />
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <label className="form-label">Farm Size</label>
                                                            <input 
                                                                type="text" 
                                                                className="form-control" 
                                                                value={editedData.farmSize}
                                                                onChange={(e) => handleInputChange('farmSize', e.target.value)}
                                                            />
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <label className="form-label">Soil Type</label>
                                                            <select 
                                                                className="form-select"
                                                                value={editedData.soilType}
                                                                onChange={(e) => handleInputChange('soilType', e.target.value)}
                                                            >
                                                                <option value="Loamy">Loamy</option>
                                                                <option value="Clay">Clay</option>
                                                                <option value="Sandy">Sandy</option>
                                                                <option value="Silt">Silt</option>
                                                                <option value="Peaty">Peaty</option>
                                                                <option value="Chalky">Chalky</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="form-group">
                                                    <label className="form-label">Main Crops</label>
                                                    <div className="d-flex mb-2">
                                                        <select 
                                                            className="form-select me-2"
                                                            value={newCrop}
                                                            onChange={(e) => setNewCrop(e.target.value)}
                                                        >
                                                            <option value="">Select a crop</option>
                                                            {availableCrops.map(crop => (
                                                                <option key={crop} value={crop}>{crop}</option>
                                                            ))}
                                                        </select>
                                                        <button 
                                                            className="btn btn-outline-primary"
                                                            onClick={addCrop}
                                                            disabled={!newCrop}
                                                        >
                                                            Add
                                                        </button>
                                                    </div>
                                                    <div>
                                                        {editedData.mainCrops.map(crop => (
                                                            <span key={crop} className="crop-tag">
                                                                {crop}
                                                                <span className="remove" onClick={() => removeCrop(crop)}>
                                                                    <i className="fas fa-times"></i>
                                                                </span>
                                                            </span>
                                                        ))}
                                                    </div>
                                                </div>
                                                
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <div className="form-check form-switch">
                                                                <input 
                                                                    className="form-check-input"
                                                                    type="checkbox"
                                                                    id="notifications"
                                                                    checked={editedData.notifications}
                                                                    onChange={(e) => handleInputChange('notifications', e.target.checked)}
                                                                />
                                                                <label className="form-check-label" htmlFor="notifications">
                                                                    Enable Notifications
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="form-group">
                                                            <div className="form-check form-switch">
                                                                <input 
                                                                    className="form-check-input"
                                                                    type="checkbox"
                                                                    id="smsAlerts"
                                                                    checked={editedData.smsAlerts}
                                                                    onChange={(e) => handleInputChange('smsAlerts', e.target.checked)}
                                                                />
                                                                <label className="form-check-label" htmlFor="smsAlerts">
                                                                    SMS Alerts
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="d-flex justify-content-end mt-4">
                                                    <button className="btn btn-outline-secondary cancel-btn" onClick={cancelEdit}>
                                                        Cancel
                                                    </button>
                                                    <button className="btn btn-primary save-btn" onClick={saveProfile}>
                                                        Save Changes
                                                    </button>
                                                </div>
                                            </div>
                                        ) : (
                                            <div>
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Full Name</label>
                                                            <p className="form-control-static">{userData.name}</p>
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Email Address</label>
                                                            <p className="form-control-static">{userData.email}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Phone Number</label>
                                                            <p className="form-control-static">{userData.phone}</p>
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Location</label>
                                                            <p className="form-control-static">{userData.location}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Farm Size</label>
                                                            <p className="form-control-static">{userData.farmSize}</p>
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Soil Type</label>
                                                            <p className="form-control-static">{userData.soilType}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="mb-3">
                                                    <label className="form-label">Main Crops</label>
                                                    <div>
                                                        {userData.mainCrops.map(crop => (
                                                            <span key={crop} className="crop-tag">
                                                                {crop}
                                                            </span>
                                                        ))}
                                                    </div>
                                                </div>
                                                
                                                <div className="row">
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">Notifications</label>
                                                            <p className="form-control-static">
                                                                {userData.notifications ? 
                                                                    <span className="text-success"><i className="fas fa-check-circle me-1"></i> Enabled</span> : 
                                                                    <span className="text-danger"><i className="fas fa-times-circle me-1"></i> Disabled</span>
                                                                }
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div className="col-md-6">
                                                        <div className="mb-3">
                                                            <label className="form-label">SMS Alerts</label>
                                                            <p className="form-control-static">
                                                                {userData.smsAlerts ? 
                                                                    <span className="text-success"><i className="fas fa-check-circle me-1"></i> Enabled</span> : 
                                                                    <span className="text-danger"><i className="fas fa-times-circle me-1"></i> Disabled</span>
                                                                }
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="d-flex justify-content-end mt-4">
                                                    <button className="btn btn-primary" onClick={() => setIsEditing(true)}>
                                                        <i className="fas fa-edit me-2"></i>Edit Profile
                                                    </button>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Toast Container */}
                    <div className="toast-container">
                        {toast.show && (
                            <Toast 
                                message={toast.message} 
                                type={toast.type} 
                                onClose={closeToast}
                            />
                        )}
                    </div>
                </section>
            );
        };

        const App = () => {
            return (
                <div>
                    <Navbar />
                    <Home />
                    <CropRecommendation />
                    <DiseaseDetection />
                    <ExpertFinder />
                    <GovSchemes />
                    <Profile />
                    <Footer />
                    <ChatWindow />
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
